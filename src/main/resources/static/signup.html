<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>회원가입</title>
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; background: #f6f7f9; color: #111; }
        .container { max-width: 520px; margin: 0 auto; padding: 48px 20px; }
        .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 28px; box-shadow: 0 1px 2px rgba(0,0,0,0.04); }
        h1 { margin: 0 0 18px; font-size: 24px; }
        .group { margin-bottom: 14px; }
        label { display: block; font-weight: 600; margin-bottom: 6px; }
        input { width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 10px; font-size: 14px; }
        .btn { width: 100%; appearance: none; border: 0; padding: 12px 16px; border-radius: 10px; font-weight: 700; cursor: pointer; background: #16a34a; color: #fff; margin-top: 8px; }
        .links { margin-top: 14px; display: flex; justify-content: space-between; font-size: 14px; }
        a { color: #2563eb; text-decoration: none; }
    </style>
    <link rel="icon" href="data:,">
</head>
<body>
<div class="container">
    <div class="card">
        <h1>회원가입</h1>
        <form id="signup-form">
            <div class="group">
                <label for="name">이름</label>
                <input id="name" name="name" type="text" placeholder="홍길동" required>
            </div>
            <div class="group">
                <label for="email">이메일</label>
                <input id="email" name="email" type="email" placeholder="you@example.com" required>
            </div>
            <div class="group">
                <label for="password">비밀번호</label>
                <input id="password" name="password" type="password" placeholder="••••••••" required>
            </div>
            <div class="group">
                <label for="password2">비밀번호 확인</label>
                <input id="password2" name="password2" type="password" placeholder="••••••••" required>
            </div>
            <button class="btn" type="submit">회원가입</button>
        </form>
        <div class="links">
            <a href="/">홈으로</a>
            <a href="/login.html">로그인</a>
        </div>
    </div>
</div>
<script>
  const form = document.getElementById('signup-form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    const password2 = document.getElementById('password2').value;

    if (password !== password2) {
      alert('비밀번호가 일치하지 않습니다.');
      return;
    }

    try {
      const res = await fetch('/api/auth/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, email, password })
      });

      if (!res.ok) {
        const text = await res.text();
        throw new Error(text || '회원가입 실패');
      }

      const data = await res.json();
      // 토큰 저장 (선택)
      localStorage.setItem('accessToken', data.accessToken);
      localStorage.setItem('refreshToken', data.refreshToken);
      localStorage.setItem('userEmail', data.email);
      localStorage.setItem('userName', data.name);

      alert('회원가입 성공! 로그인 페이지로 이동합니다.');
      window.location.href = '/login.html';
    } catch (err) {
      alert('에러: ' + err.message);
    }
  });
</script>
</body>
</html>


